"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[881],{4465:function(e,t,n){n.d(t,{J:function(){return v}});var r="https://js.stripe.com/v3",a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=function(){for(var e=document.querySelectorAll('script[src^="'.concat(r,'"]')),t=0;t<e.length;t++){var n=e[t];if(a.test(n.src))return n}return null},s=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(r).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},o=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.26.0",startTime:t})},c=null,d=function(e){return null!==c||(c=new Promise((function(t,n){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(i),window.Stripe)t(window.Stripe);else try{var r=l();r&&e?console.warn(i):r||(r=s(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(a){return void n(a)}else t(null)}))),c},u=function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return o(r,n),r},p=Promise.resolve().then((function(){return d(null)})),m=!1;p["catch"]((function(e){m||console.warn(e)}));var v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m=!0;var r=Date.now();return p.then((function(e){return u(e,t,r)}))}},881:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{on:{submit:function(t){return t.preventDefault(),e.HandleSeparateCard.apply(null,arguments)}}},[e._m(0),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Nombre"},model:{value:e.billingDetails.name,callback:function(t){e.$set(e.billingDetails,"name",t)},expression:"billingDetails.name"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Correo electronico"},model:{value:e.billingDetails.email,callback:function(t){e.$set(e.billingDetails,"email",t)},expression:"billingDetails.email"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"telefono"},model:{value:e.billingDetails.phone,callback:function(t){e.$set(e.billingDetails,"phone",t)},expression:"billingDetails.phone"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("label",{attrs:{for:"card-number"}},[e._v("Credit Card")]),n("div",{staticClass:"tarjeta",attrs:{id:"card-number"}})]),n("v-col",{attrs:{cols:"4"}},[n("label",{attrs:{for:"card-expiry"}},[e._v("Expiry date")]),n("div",{staticClass:"tarjeta",attrs:{id:"card-expiry"}})]),n("v-col",{attrs:{cols:"4"}},[n("label",{attrs:{for:"card-cvc"}},[e._v("cvc")]),n("div",{staticClass:"tarjeta",attrs:{id:"card-cvc"}})])],1),n("v-row"),n("v-btn",{attrs:{depressed:"",color:"primary",type:"submit",loading:e.loading}},[e._v(" Buy ")])],1)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nes-field"},[n("label",{attrs:{for:"email_field"}},[e._v("Credit Card")]),n("div",{staticClass:"nes-input",attrs:{id:"stripe-element-mount-point"}})])}],i=n(4465),l=n(629);var s={components:{},data(){return{loading:!0,elements:null,stripe:null,billingDetails:{address:{state:null,postal_code:null},email:null,name:null,phone:null}}},computed:{...(0,l.rn)(["token"])},mounted(){this.chargeStripe()},methods:{async chargeStripe(){this.stripe=await(0,i.J)("pk_test_51KTZVHIaT2jl6JNbR8MpmiG41BZKXx2F1uFCk0hp1S0kIZD0SHLKnHNLEcRG0FvFBLmymzE2pMSMx6IwjgMJVEXf00YCXUlc3e");const e={base:{fontSize:"18px",color:"#000000",fontFamily:"Roboto"}};this.elements=this.stripe.elements();const t=this.elements.create("cardNumber",{style:e,showIcon:!0}),n=this.elements.create("cardExpiry",{style:e}),r=this.elements.create("cardCvc",{style:e});t.mount("#card-number"),n.mount("#card-expiry"),r.mount("#card-cvc"),this.loading=!1},async HandleSeparateCard(){if(this.loading)return;this.loading=!0;const e=this.elements.getElement("cardNumber"),{error:t,paymentMethod:n}=await this.stripe.createPaymentMethod({type:"card",card:e,billing_details:this.billingDetails});if(t)this.$root.vtoast.show({message:t});else{const e=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json","auth-token":this.token},body:JSON.stringify({id:n.id,amount:2e4})}),{data:t,error:r}=await e.json();r&&this.$root.vtoast.show({message:r}),console.log(n),console.log(t,r),this.loading=!1}}}},o=s,c=n(1001),d=n(3453),u=n.n(d),p=n(3150),m=n(2102),v=n(2877),f=n(5978),h=(0,c.Z)(o,r,a,!1,null,null,null),b=h.exports;u()(h,{VBtn:p.Z,VCol:m.Z,VRow:v.Z,VTextField:f.Z})}}]);
//# sourceMappingURL=881.e3469dc4.js.map