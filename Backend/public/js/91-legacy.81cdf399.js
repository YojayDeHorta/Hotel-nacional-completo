"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[91],{3482:function(t,e,o){o.r(e),o.d(e,{default:function(){return R}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-btn",{attrs:{color:"primary",elevation:"2"},on:{click:function(e){t.dialog=!0}}},[t._v("agregar habitacion")])],1),o("v-col",{attrs:{cols:"4"}},[o("v-select",{attrs:{items:t.filtroEstadoOpciones,label:"Filtrar por estado",dense:"",outlined:""},model:{value:t.filtroEstado,callback:function(e){t.filtroEstado=e},expression:"filtroEstado"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-select",{attrs:{items:t.filtroTipoOpciones,label:"Filtrar por tipo",dense:"",outlined:""},model:{value:t.filtroTipo,callback:function(e){t.filtroTipo=e},expression:"filtroTipo"}})],1)],1),o("v-row",{attrs:{mt:"5"}},t._l(t.getHabitacionesFiltro,(function(e){return o("v-col",{key:e._id,attrs:{cols:"12",sm:"6",md:"4"}},[o("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344",outlined:""}},[o("v-list-item",{attrs:{"three-line":""}},[o("v-list-item-content",[o("div",{staticClass:"text-overline mb-4"},[t._v(t._s(e.tipo_habitacion)+" "+t._s(e.personas)+" pax")]),o("v-list-item-title",{staticClass:"text-h5 mb-1"},[t._v(" "+t._s(e.name)+" ")]),o("v-list-item-subtitle",[t._v(" "+t._s(e.estado)+" - "+t._s(e.precio)+"€ ")]),o("v-list-item-subtitle",[t._v(" "+t._s(e.servicio)+" ")])],1)],1),o("v-card-actions",["Ocupado"!=e.estado?o("DeshabilitarBoton",{attrs:{habitacion:e},on:{notificacion:function(e){return t.getHabitaciones()}}}):t._e(),o("v-btn",{attrs:{outlined:"",rounded:"",text:"",color:"error"},on:{click:function(o){t.idDelete=e._id,t.dialogDelete=!0}}},[t._v(" eliminar ")])],1)],1)],1)})),1),o("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"text-h5"},[t._v("añadir habitacion")])]),o("v-card-text",[o("v-form",{on:{submit:function(e){return e.preventDefault(),t.addHabitacion.apply(null,arguments)}}},[o("v-row",[o("v-col",{attrs:{md:"12",cols:"12"}},[o("v-text-field",{attrs:{type:"text",label:"nombre de la habitacion",required:""},model:{value:t.room.name,callback:function(e){t.$set(t.room,"name",e)},expression:"room.name"}})],1)],1),o("v-row",[o("v-col",{attrs:{md:"6",cols:"12"}},[o("v-select",{attrs:{items:t.tipos_habitaciones,label:"tipo de habitacion"},model:{value:t.room.tipo_habitacion,callback:function(e){t.$set(t.room,"tipo_habitacion",e)},expression:"room.tipo_habitacion"}})],1),o("v-col",{attrs:{md:"6",cols:"12"}},[o("v-select",{attrs:{items:t.servicio_habitaciones,label:"servicio"},model:{value:t.room.servicio,callback:function(e){t.$set(t.room,"servicio",e)},expression:"room.servicio"}})],1)],1),o("v-row",[o("v-col",{attrs:{md:"6",cols:"12"}},["otro"==t.room.tipo_habitacion?o("v-text-field",{attrs:{type:"text",label:"Nombre de la habitacion",required:""},model:{value:t.otro_habitacion,callback:function(e){t.otro_habitacion=e},expression:"otro_habitacion"}}):t._e()],1),o("v-col",{attrs:{md:"6",cols:"12"}},["otro"==t.room.servicio?o("v-text-field",{attrs:{type:"text",label:"Servicio",required:""},model:{value:t.otro_servicio,callback:function(e){t.otro_servicio=e},expression:"otro_servicio"}}):t._e()],1)],1),o("v-row",[o("v-col",{attrs:{md:"4"}},[o("v-text-field",{attrs:{type:"number",label:"Precio",required:""},model:{value:t.room.precio,callback:function(e){t.$set(t.room,"precio",e)},expression:"room.precio"}})],1),o("v-col",{attrs:{md:"4"}},[o("v-text-field",{attrs:{type:"number",label:"Personas",required:""},model:{value:t.room.personas,callback:function(e){t.$set(t.room,"personas",e)},expression:"room.personas"}})],1)],1),o("v-spacer"),o("v-card-actions",[o("v-btn",{staticClass:"mr-2",attrs:{type:"submit",color:"primary"},on:{click:function(e){e.stopPropagation(),t.dialog=!1}}},[t._v("Agregar")]),o("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:function(e){e.stopPropagation(),t.dialog=!1}}},[t._v("Cancelar")])],1)],1)],1)],1)],1),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[o("v-card",[o("v-toolbar",{attrs:{color:"red",dark:""}},[t._v("ELIMINAR REGISTRO")]),o("v-card-title",{staticClass:"d-flex justify-center mb-3",staticStyle:{"text-transform":"uppercase","font-size":"15px"}},[t._v("¿ estas seguro de borrar esta habitacion ?")]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green darken-1 white--text",depressed:""},on:{click:function(e){t.dialogDelete=!1,t.idDelete=null}}},[t._v("cancelar")]),o("v-btn",{attrs:{color:"ml-5 error darken-1",depressed:""},on:{click:function(e){t.deleteHabitacion(t.idDelete),t.dialogDelete=!1}}},[t._v("Eliminar")]),o("v-spacer")],1)],1)],1)],1)},i=[],r=o(6198),n=o(4367),s=(o(5666),o(7327),o(1539),o(8862),o(629)),l=o(3831),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",["Disponible"==t.habitacion.estado?o("v-btn",{attrs:{outlined:"",rounded:"",text:"",loading:t.loading},on:{click:function(e){t.dialogDelete=!0}}},[t._v(" Deshabilitar ")]):"Deshabilitado"==t.habitacion.estado?o("v-btn",{attrs:{outlined:"",rounded:"",text:"",loading:t.loading},on:{click:function(e){t.dialogDelete=!0}}},[t._v(" Cambiar a disponible ")]):t._e(),o("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[o("v-card",["Disponible"==t.habitacion.estado?o("v-toolbar",{attrs:{color:"black",dark:""}},[t._v("Cambiar estado de habitacion")]):"Deshabilitado"==t.habitacion.estado?o("v-toolbar",{attrs:{color:"blue",dark:""}},[t._v("Cambiar estado de habitacion")]):t._e(),"Disponible"==t.habitacion.estado?o("v-card-title",{staticClass:"d-flex justify-center mb-3",staticStyle:{"text-transform":"uppercase","font-size":"15px"}},[t._v("¿ estas seguro de deshabilitar esta habitacion ?")]):"Deshabilitado"==t.habitacion.estado?o("v-card-title",{staticClass:"d-flex justify-center mb-3",staticStyle:{"text-transform":"uppercase","font-size":"15px"}},[t._v("¿ estas seguro de Habilitar esta habitacion ?")]):t._e(),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green darken-1 white--text",depressed:""},on:{click:function(e){t.dialogDelete=!1}}},[t._v("cancelar")]),o("v-btn",{attrs:{color:"ml-5 error darken-1",depressed:""},on:{click:function(e){t.changeStateHabitacion(),t.dialogDelete=!1}}},[t._v("Cambiar estado")]),o("v-spacer")],1)],1)],1)],1)},d=[],u={name:"DeshabilitarHabitacion",data:function(){return{loading:!1,dialogDelete:!1}},props:{habitacion:null},computed:(0,n.Z)({},(0,s.rn)(["token"])),methods:{changeStateHabitacion:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,fetch("/api/habitaciones/state",{method:"POST",headers:{"Content-Type":"application/json","auth-token":t.token},body:JSON.stringify(t.habitacion)});case 4:return o=e.sent,e.next=7,o.json();case 7:if(a=e.sent,a.data,i=a.error,!i){e.next=13;break}return t.$root.vtoast.show({message:i}),e.abrupt("return");case 13:t.$root.vtoast.show({message:"habitacion cambiada exitosamente"}),t.$emit("notificacion","a"),t.loading=!1,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))()}}},b=u,v=o(1001),p=o(3453),m=o.n(p),h=o(3150),f=o(3237),g=o(7118),x=o(4497),_=o(9762),k=o(6656),D=(0,v.Z)(b,c,d,!1,null,null,null),w=D.exports;m()(D,{VBtn:h.Z,VCard:f.Z,VCardActions:g.h7,VCardTitle:g.EB,VDialog:x.Z,VSpacer:_.Z,VToolbar:k.Z});var C={components:{Calendario:l["default"],DeshabilitarBoton:w},data:function(){return{habitaciones:null,dialog:!1,room:{name:"",tipo_habitacion:"",servicio:"",precio:0,personas:0,ocupado:!1},otro_habitacion:"",otro_servicio:"",tipos_habitaciones:["Individual","Doble","Familiar","otro"],servicio_habitaciones:["alojamiento + desayuno","alojamiento + media pension","otro"],filtroTipoOpciones:["Ninguno","Individual","Doble","Familiar"],filtroTipo:"Ninguno",filtroEstadoOpciones:["Ninguno","Ocupados","Disponibles","Deshabilitados"],filtroEstado:"Ninguno",idDelete:"",dialogDelete:!1}},created:function(){this.getHabitaciones(),this.$route.query.filtro&&(this.filtroTipo=this.$route.query.filtro)},mounted:function(){},computed:(0,n.Z)((0,n.Z)({},(0,s.rn)(["token"])),{},{getHabitacionesFiltro:function(){if(this.habitaciones){var t=this.habitaciones;return"Ocupados"==this.filtroEstado&&(t=t.filter((function(t){return"Ocupado"==t.estado}))),"Disponibles"==this.filtroEstado&&(t=t.filter((function(t){return"Disponible"==t.estado}))),"Deshabilitados"==this.filtroEstado&&(t=t.filter((function(t){return"Deshabilitado"==t.estado}))),"Individual"==this.filtroTipo&&(t=t.filter((function(t){return"Individual"==t.tipo_habitacion}))),"Doble"==this.filtroTipo&&(t=t.filter((function(t){return"Doble"==t.tipo_habitacion}))),"Familiar"==this.filtroTipo&&(t=t.filter((function(t){return"Familiar"==t.tipo_habitacion}))),t}}}),methods:{getHabitaciones:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var o,a,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/habitaciones",{headers:{"Content-Type":"application/json","auth-token":t.token}});case 3:return o=e.sent,e.next=6,o.json();case 6:if(a=e.sent,i=a.data,r=a.error,!r){e.next=12;break}return t.$root.vtoast.show({message:r}),e.abrupt("return");case 12:console.log(i),t.habitaciones=i,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()},addHabitacion:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,"otro"==t.room.tipo_habitacion&&(t.room.tipo_habitacion=t.otro_habitacion),"otro"==t.room.servicio&&(t.room.servicio=t.otro_servicio),console.log(t.room),e.next=6,fetch("/api/habitaciones",{method:"POST",headers:{"Content-Type":"application/json","auth-token":t.token},body:JSON.stringify(t.room)});case 6:return o=e.sent,e.next=9,o.json();case 9:if(a=e.sent,a.data,i=a.error,!i){e.next=15;break}return t.$root.vtoast.show({message:i}),e.abrupt("return");case 15:t.getHabitaciones(),t.$root.vtoast.show({message:"habitacion agretada exitosamente"}),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))()},deleteHabitacion:function(t){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function o(){var a,i,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,console.log(t),o.next=4,fetch("/api/habitaciones",{method:"DELETE",headers:{"Content-Type":"application/json","auth-token":e.token},body:JSON.stringify({id:t})});case 4:return a=o.sent,o.next=7,a.json();case 7:if(i=o.sent,i.data,r=i.error,!r){o.next=13;break}return e.$root.vtoast.show({message:r}),o.abrupt("return");case 13:e.getHabitaciones(),e.$root.vtoast.show({message:"habitacion eliminada exitosamente"}),o.next=20;break;case 17:o.prev=17,o.t0=o["catch"](0),console.log(o.t0);case 20:case"end":return o.stop()}}),o,null,[[0,17]])})))()}}},y=C,Z=o(2102),V=o(4228),T=o(6232),E=o(7620),$=o(1317),S=o(2877),H=o(7032),O=o(5978),j=(0,v.Z)(y,a,i,!1,null,null,null),R=j.exports;m()(j,{VBtn:h.Z,VCard:f.Z,VCardActions:g.h7,VCardText:g.ZB,VCardTitle:g.EB,VCol:Z.Z,VContainer:V.Z,VDialog:x.Z,VForm:T.Z,VListItem:E.Z,VListItemContent:$.km,VListItemSubtitle:$.oZ,VListItemTitle:$.V9,VRow:S.Z,VSelect:H.Z,VSpacer:_.Z,VTextField:O.Z,VToolbar:k.Z})}}]);
//# sourceMappingURL=91-legacy.81cdf399.js.map